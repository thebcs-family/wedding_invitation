"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{578:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(5155),a=n(9137),o=n.n(a),l=n(2115),i=n(544),s=n(7558),c=n(3264),h=n(8842),u=n(9957),d=n(4688),p=n(7777);let m={korea:{lat:36.3504,lng:127.3845,color:"#ff4d4d"},bolivia:{lat:-16.4897,lng:-68.1193,color:"#4dff4d"},italy:{lat:44.4949,lng:11.3426,color:"#4d4dff"}},g=(e,t,n)=>{let r=Math.PI/180*(90-e),a=Math.PI/180*(t+180),o=-(n*Math.sin(r)*Math.cos(a)),l=n*Math.sin(r)*Math.sin(a),i=n*Math.cos(r);return new c.Pq0(o,i,l)},f=(e,t,n,r)=>{let a=(n-e)*Math.PI/180,o=(r-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return Math.round(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371)};function x(e){let{locations:t}=e,n=(0,l.useRef)(null),a=(0,l.useRef)(null);(0,i.C)(e=>{let{clock:t}=e;n.current&&(n.current.rotation.y=.05*t.getElapsedTime()),a.current&&(a.current.uniforms.time.value=t.getElapsedTime())});let o=Object.entries(t),s=[],u=[];for(let e=0;e<o.length;e++)for(let t=e+1;t<o.length;t++){let n=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.01,r=[],a=new c.Pq0().addVectors(e,t).multiplyScalar(.5);a.length(),a.normalize().multiplyScalar(n+.15);for(let o=0;o<=50;o++){let l=o/50,i=new c.Pq0;i.x=Math.pow(1-l,2)*e.x+2*(1-l)*l*a.x+Math.pow(l,2)*t.x,i.y=Math.pow(1-l,2)*e.y+2*(1-l)*l*a.y+Math.pow(l,2)*t.y,i.z=Math.pow(1-l,2)*e.z+2*(1-l)*l*a.z+Math.pow(l,2)*t.z;let s=i.length();i.multiplyScalar(n/s),r.push(i)}return r}(g(o[e][1].lat,o[e][1].lng,1.01),g(o[t][1].lat,o[t][1].lng,1.01));s.push(n);let r=f(o[e][1].lat,o[e][1].lng,o[t][1].lat,o[t][1].lng),a=new c.B6O(n);u.push({points:n,distance:r,curve:a})}let d={uniforms:{time:{value:0},color1:{value:new c.Q1f("#ff4d4d")},color2:{value:new c.Q1f("#4dff4d")},color3:{value:new c.Q1f("#4d4dff")}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    ",fragmentShader:"\n      uniform float time;\n      uniform vec3 color1;\n      uniform vec3 color2;\n      uniform vec3 color3;\n      varying vec2 vUv;\n      \n      void main() {\n        float t = mod(time * 0.1, 1.0);\n        vec3 color;\n        \n        if (t < 0.33) {\n          color = mix(color1, color2, t * 3.0);\n        } else if (t < 0.66) {\n          color = mix(color2, color3, (t - 0.33) * 3.0);\n        } else {\n          color = mix(color3, color1, (t - 0.66) * 3.0);\n        }\n        \n        gl_FragColor = vec4(color, 0.7);\n      }\n    "};return(0,r.jsxs)("group",{ref:n,children:[s.map((e,t)=>(0,r.jsxs)("line",{children:[(0,r.jsxs)("bufferGeometry",{children:[(0,r.jsx)("bufferAttribute",{attach:"attributes-position",count:e.length,array:new Float32Array(e.flatMap(e=>[e.x,e.y,e.z])),itemSize:3}),(0,r.jsx)("bufferAttribute",{attach:"attributes-uv",count:e.length,array:new Float32Array(e.map((t,n)=>[n/(e.length-1),0]).flat()),itemSize:2})]}),(0,r.jsx)("shaderMaterial",{ref:a,attach:"material",args:[d],transparent:!0,linewidth:3})]},t)),u.map((e,t)=>{let{points:n,distance:a,curve:o}=e,l=n[Math.floor(n.length/2)],i=o.getTangent(.5),s=l.clone().normalize(),u=new c.Pq0().crossVectors(i,s).normalize(),d=new c.Pq0().crossVectors(s,u).normalize(),p=new c.kn4;p.makeBasis(d,s,u);let m=new c.PTz().setFromRotationMatrix(p),g=l.clone().normalize().multiplyScalar(1.02),f=a<1e4?[-Math.PI/2,0,Math.PI]:[-Math.PI/2,0,0];return(0,r.jsx)("group",{position:g,quaternion:m,children:(0,r.jsx)(h.E,{position:[0,0,0],rotation:f,fontSize:.08,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.003,outlineColor:"#000000",outlineBlur:.003,renderOrder:1,children:"".concat(a," km")})},"distance-".concat(t))})]})}function w(e){let{content:t,isBehind:n,isDaejeon:a,onClick:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{id:"6b0b96cc56ab2641",children:"@-webkit-keyframes glow{0%,100%{text-shadow:0 0 10px rgba(239,68,68,.5)}50%{text-shadow:0 0 20px rgba(239,68,68,.8)}}@-moz-keyframes glow{0%,100%{text-shadow:0 0 10px rgba(239,68,68,.5)}50%{text-shadow:0 0 20px rgba(239,68,68,.8)}}@-o-keyframes glow{0%,100%{text-shadow:0 0 10px rgba(239,68,68,.5)}50%{text-shadow:0 0 20px rgba(239,68,68,.8)}}@keyframes glow{0%,100%{text-shadow:0 0 10px rgba(239,68,68,.5)}50%{text-shadow:0 0 20px rgba(239,68,68,.8)}}"}),(0,r.jsx)("div",{onClick:l,className:"jsx-6b0b96cc56ab2641 "+"bg-white p-2 rounded-lg shadow-lg whitespace-nowrap transform transition-all duration-300 cursor-pointer ".concat(n?"opacity-50 scale-90":"opacity-100 scale-100"," ").concat(a?"border-2 border-red-500":""),children:(0,r.jsx)("div",{className:"jsx-6b0b96cc56ab2641 "+"text-sm font-medium ".concat(a?"text-red-500 animate-[glow_2s_ease-in-out_infinite]":"text-gray-800"),children:t})})]})}function j(e){let{position:t,color:n,name:a,isHovered:o,onClick:s,tooltipContent:h,cameraPosition:d}=e,p=(0,l.useRef)(null),m=(0,l.useRef)(null),[g,f]=(0,l.useState)(!1),x="korea"===a;return(0,i.C)(e=>{let{camera:n,clock:r}=e;if(m.current)if(x){let e=1+.3*Math.sin(3*r.getElapsedTime());m.current.scale.setScalar(e)}else m.current.scale.setScalar(1+.1*Math.sin(2*r.getElapsedTime()));let a=new c.Pq0().copy(t),o=new c.Pq0().subVectors(n.position,new c.Pq0(0,0,0)).normalize(),l=new c.Pq0().subVectors(a,new c.Pq0(0,0,0)).normalize();f(0>o.dot(l))}),(0,r.jsxs)("group",{position:t,onClick:s,children:[(0,r.jsxs)("mesh",{ref:p,children:[(0,r.jsx)("sphereGeometry",{args:[.02,16,16]}),(0,r.jsx)("meshBasicMaterial",{color:n})]}),(0,r.jsxs)("mesh",{ref:m,children:[(0,r.jsx)("sphereGeometry",{args:[.03,16,16]}),(0,r.jsx)("meshBasicMaterial",{color:n,transparent:!0,opacity:g?.6:.3})]}),(0,r.jsx)(u.E,{center:!0,position:[0,.1,0],children:(0,r.jsx)(w,{content:h,isBehind:g,isDaejeon:x,onClick:s})})]})}function M(e){let{language:t,onLocationClick:n}=e,a=(0,l.useRef)(null),o=(0,l.useRef)(null),s=(0,l.useRef)(null),[h,u]=(0,l.useState)(null),{t:d}=(0,p.Bd)(t),[f,w,M,b]=(0,i.F)(c.Tap,["/images/earth_daymap.jpg","/images/earth_normal.jpg","/images/earth_specular.jpg","/images/earth_clouds.png"]);return(0,l.useEffect)(()=>{f&&w&&M&&b&&(f.colorSpace=c.er$,w.colorSpace=c.jf0,M.colorSpace=c.jf0,b.colorSpace=c.er$)},[f,w,M,b]),(0,i.C)(e=>{let{clock:t}=e;if(o.current&&a.current&&s.current){let e=t.getElapsedTime(),n=.1*Math.sin(.2*e),r=.02*Math.sin(.15*e),l=.02*Math.cos(.1*e);o.current.rotation.y=.04*e+n,o.current.rotation.x=r,o.current.rotation.z=l;let i=.05*e;a.current.rotation.y=i,s.current.rotation.y=i}}),(0,r.jsxs)("group",{children:[(0,r.jsxs)("mesh",{ref:a,children:[(0,r.jsx)("sphereGeometry",{args:[1,64,64]}),(0,r.jsx)("meshPhongMaterial",{map:f,normalMap:w,normalScale:[.5,.5],specularMap:M,shininess:5,bumpMap:w,bumpScale:.05})]}),(0,r.jsxs)("mesh",{ref:o,children:[(0,r.jsx)("sphereGeometry",{args:[1.01,64,64]}),(0,r.jsx)("meshPhongMaterial",{map:b,transparent:!0,opacity:.3,depthWrite:!1,blending:c.EZo})]}),(0,r.jsx)(x,{locations:m}),(0,r.jsx)("group",{ref:s,children:Object.entries(m).map(e=>{let[t,a]=e,o=g(a.lat,a.lng,1.01),l=d.locations[t].title;return(0,r.jsx)(j,{position:o,color:a.color,name:t,isHovered:h===t,onClick:()=>null==n?void 0:n(t),onPointerEnter:()=>u(t),onPointerLeave:()=>u(null),tooltipContent:l},t)})})]})}function b(e){let{language:t,onLocationClick:n}=e,[a,o]=(0,l.useState)(!1),[i,c]=(0,l.useState)(2.2),[h,u]=(0,l.useState)(60);return(0,l.useEffect)(()=>{o(!0);let e=()=>{let e=window.innerWidth;e<=384?(c(2.8),u(60)):e<=480?(c(2.5),u(50)):e<=640?(c(2.8),u(45)):e<=768?(c(2.5),u(50)):e<=1024?(c(2.3),u(55)):(c(2.2),u(60))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.jsx)("div",{className:"h-[400px] w-full bg-transparent rounded-lg overflow-hidden",children:(0,r.jsxs)(s.Hl,{camera:{position:[0,0,i],fov:h},gl:{alpha:!0,antialias:!0},children:[(0,r.jsx)("color",{attach:"background",args:["transparent"]}),(0,r.jsx)("ambientLight",{intensity:1.5}),(0,r.jsx)("pointLight",{position:[10,10,10],intensity:1.5}),(0,r.jsx)("pointLight",{position:[-10,-10,-10],intensity:.5}),(0,r.jsx)(M,{language:t,onLocationClick:n}),(0,r.jsx)(d.N,{enableZoom:!1,enablePan:!1,rotateSpeed:.5,autoRotate:!1,minPolarAngle:0,maxPolarAngle:Math.PI,enableRotate:!0,dampingFactor:.05})]})})}}}]);